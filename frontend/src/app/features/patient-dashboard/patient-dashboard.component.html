<mat-toolbar color="primary" class="mat-elevation-z4">
  <span>Radiology PACS Portal</span>
</mat-toolbar>

<div style="padding: 24px;">
  <mat-card class="mat-elevation-z2">
    <mat-table [dataSource]="patients">
      
      <ng-container matColumnDef="mrn">
        <mat-header-cell *matHeaderCellDef> MRN </mat-header-cell>
        <mat-cell *matCellDef="let p"> <strong>{{p.mrn}}</strong> </mat-cell>
      </ng-container>

      <ng-container matColumnDef="hl7_name">
        <mat-header-cell *matHeaderCellDef> Patient Name (L^F^M^P^S) </mat-header-cell>
        <mat-cell *matCellDef="let p" class="hl7-text"> {{ formatHl7Name(p) }} </mat-cell>
      </ng-container>

      <ng-container matColumnDef="sex">
        <mat-header-cell *matHeaderCellDef> Sex </mat-header-cell>
        <mat-cell *matCellDef="let p"> {{p.sex}} </mat-cell>
      </ng-container>

      <ng-container matColumnDef="dob">
        <mat-header-cell *matHeaderCellDef> DOB (YYYYMMDD) </mat-header-cell>
        <mat-cell *matCellDef="let p" class="hl7-text"> {{ p.date_of_birth | date:'yyyyMMdd' }} </mat-cell>
      </ng-container>

      <ng-container matColumnDef="actions">
        <mat-header-cell *matHeaderCellDef> </mat-header-cell>
        <mat-cell *matCellDef="let p">
          <button mat-flat-button 
                  color="accent" 
                  matTooltip="View Imaging Studies"
                  (click)="viewStudies(p)">
            <mat-icon>visibility</mat-icon>
            View Studies
          </button>
        </mat-cell>
      </ng-container>

      <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
      <mat-row *matRowDef="let row; columns: displayedColumns;" class="patient-row"></mat-row>
    </mat-table>
  </mat-card>
</div>